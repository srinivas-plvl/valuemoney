/*!
 * GMaps.js v0.2.26
 * http://hpneo.github.com/gmaps/
 *
 * Copyright 2012, Gustavo Leon
 * Released under the MIT License.
 */

if(window.google&&window.google.maps){var GMaps=function(c){var i=document,h=function(b,f){return"jQuery"in c&&f?$("#"+b.replace("#",""),f)[0]:i.getElementById(b.replace("#",""))},n=function(b){var f=this;window.context_menu={};this.el="string"===typeof b.el||"string"===typeof b.div?h(b.el||b.div,b.context):b.el||b.div;this.el.style.width=b.width||this.el.scrollWidth||this.el.offsetWidth;this.el.style.height=b.height||this.el.scrollHeight||this.el.offsetHeight;this.controls=[];this.overlays=[];this.layers=
[];this.singleLayers={};this.markers=[];this.polylines=[];this.routes=[];this.polygons=[];this.overlay_el=this.infoWindow=null;this.zoom=b.zoom||15;var g=b.markerClusterer,c;c=b.mapType?google.maps.MapTypeId[b.mapType.toUpperCase()]:google.maps.MapTypeId.ROADMAP;var t=new google.maps.LatLng(b.lat,b.lng);delete b.el;delete b.lat;delete b.lng;delete b.mapType;delete b.width;delete b.height;delete b.markerClusterer;var l=b.zoomControlOpt||{style:"DEFAULT",position:"TOP_LEFT"},j,k={};c={zoom:this.zoom,
center:t,mapTypeId:c};l={panControl:b.panControl||!0,zoomControl:b.zoomControl||!0,zoomControlOptions:{style:google.maps.ZoomControlStyle[l.style||"DEFAULT"],position:google.maps.ControlPosition[l.position||"TOP_LEFT"]},mapTypeControl:b.mapTypeControl||!0,scaleControl:b.scaleControl||!0,streetViewControl:b.streetViewControl||!0,overviewMapControl:j||!0};!0!=b.disableDefaultUI&&(c=extend_object(c,l));k=extend_object(c,b);this.map=new google.maps.Map(this.el,k);g&&(this.markerClusterer=g.apply(this,
[this.map]));this.setContextMenu=function(a){window.context_menu[a.control]={};for(var d in a.options)if(a.options.hasOwnProperty(d)){var b=a.options[d];window.context_menu[a.control][b.name]={title:b.title,action:b.action}}a=i.createElement("ul");a.id="gmaps_context_menu";a.style.display="none";a.style.position="absolute";a.style.minWidth="100px";a.style.background="white";a.style.listStyle="none";a.style.padding="8px";a.style.boxShadow="2px 2px 6px #ccc";i.body.appendChild(a);var e=h("gmaps_context_menu");
google.maps.event.addDomListener(e,"mouseout",function(a){(!a.relatedTarget||!this.contains(a.relatedTarget))&&window.setTimeout(function(){e.style.display="none"},400)},!1)};this.hideContextMenu=function(){var a=h("gmaps_context_menu");a&&(a.style.display="none")};g="bounds_changed center_changed click dblclick drag dragend dragstart idle maptypeid_changed projection_changed resize tilesloaded zoom_changed".split(" ");l=["mousemove","mouseout","mouseover"];for(j=0;j<g.length;j++)(function(a,d){google.maps.event.addListener(a,
d,function(a){void 0==a&&(a=this);b[d]&&b[d].apply(this,[a]);f.hideContextMenu()})})(this.map,g[j]);for(j=0;j<l.length;j++)(function(a,d){google.maps.event.addListener(a,d,function(a){void 0==a&&(a=this);b[d]&&b[d].apply(this,[a])})})(this.map,l[j]);google.maps.event.addListener(this.map,"rightclick",function(a){b.rightclick&&b.rightclick.apply(this,[a]);var d="",p=window.context_menu.map,e;for(e in p)p.hasOwnProperty(e)&&(d+='<li><a id="map_'+e+'" href="#">'+p[e].title+"</a></li>");if(h("gmaps_context_menu")){var q=
h("gmaps_context_menu");q.innerHTML=d;var d=q.getElementsByTagName("a"),u=d.length;for(e=0;e<u;e++){var c=d[e];google.maps.event.clearListeners(c,"click");google.maps.event.addDomListenerOnce(c,"click",function(d){d.preventDefault();p[this.id.replace("map_","")].action.apply(f,[a]);f.hideContextMenu()},!1)}e=f.el.offsetTop+a.pixel.y-15;q.style.left=f.el.offsetLeft+a.pixel.x-15+"px";q.style.top=e+"px";q.style.display="block"}});this.refresh=function(){google.maps.event.trigger(this.map,"resize")};
this.fitZoom=function(){for(var a=[],d=this.markers.length,b=0;b<d;b++)a.push(this.markers[b].getPosition());this.fitLatLngBounds(a)};this.fitLatLngBounds=function(a){for(var d=a.length,b=new google.maps.LatLngBounds,e=0;e<d;e++)b.extend(a[e]);this.map.fitBounds(b)};this.setCenter=function(a,d,b){this.map.panTo(new google.maps.LatLng(a,d));b&&b()};this.getElement=function(){return this.el};this.zoomIn=function(a){this.zoom=this.map.getZoom()+a;this.map.setZoom(this.zoom)};this.zoomOut=function(a){this.zoom=
this.map.getZoom()-a;this.map.setZoom(this.zoom)};var g=[],m;for(m in this.map)"function"==typeof this.map[m]&&!this[m]&&g.push(m);for(m=0;m<g.length;m++)(function(a,d,b){a[b]=function(){return d[b].apply(d,arguments)}})(this,this.map,g[m]);this.createControl=function(a){var d=i.createElement("div");d.style.cursor="pointer";d.style.fontFamily="Arial, sans-serif";d.style.fontSize="13px";d.style.boxShadow="rgba(0, 0, 0, 0.398438) 0px 2px 4px";for(var b in a.style)d.style[b]=a.style[b];a.id&&(d.id=a.id);
a.classes&&(d.className=a.classes);a.content&&(d.innerHTML=a.content);for(var e in a.events)(function(d,b){google.maps.event.addDomListener(d,b,function(){a.events[b].apply(this,[this])})})(d,e);d.index=1;return d};this.addControl=function(a){var d=google.maps.ControlPosition[a.position.toUpperCase()];delete a.position;a=this.createControl(a);this.controls.push(a);this.map.controls[d].push(a);return a};this.createMarker=function(a){if(a.hasOwnProperty("lat")&&a.hasOwnProperty("lng")||a.position){var d=
this,b=a.details,e=a.fences,q=a.outside,f={position:new google.maps.LatLng(a.lat,a.lng),map:null};delete a.lat;delete a.lng;delete a.fences;delete a.outside;var f=extend_object(f,a),c=new google.maps.Marker(f);c.fences=e;if(a.infoWindow){c.infoWindow=new google.maps.InfoWindow(a.infoWindow);f=["closeclick","content_changed","domready","position_changed","zindex_changed"];for(e=0;e<f.length;e++)(function(d,b){google.maps.event.addListener(d,b,function(d){a.infoWindow[b]&&a.infoWindow[b].apply(this,
[d])})})(c.infoWindow,f[e])}for(var f="animation_changed clickable_changed cursor_changed draggable_changed flat_changed icon_changed position_changed shadow_changed shape_changed title_changed visible_changed zindex_changed".split(" "),g="dblclick drag dragend dragstart mousedown mouseout mouseover mouseup".split(" "),e=0;e<f.length;e++)(function(d,b){google.maps.event.addListener(d,b,function(){a[b]&&a[b].apply(this,[this])})})(c,f[e]);for(e=0;e<g.length;e++)(function(d,b,e){google.maps.event.addListener(b,
e,function(b){b.pixel||(b.pixel=d.getProjection().fromLatLngToPoint(b.latLng));a[e]&&a[e].apply(this,[b])})})(this.map,c,g[e]);google.maps.event.addListener(c,"click",function(){this.details=b;a.click&&a.click.apply(this,[this]);c.infoWindow&&(d.hideInfoWindows(),c.infoWindow.open(d.map,c))});(a.dragend||c.fences)&&google.maps.event.addListener(c,"dragend",function(){c.fences&&d.checkMarkerGeofence(c,function(a,d){q(a,d)})});return c}throw"No latitude or longitude defined";};this.addMarker=function(a){if(!a.hasOwnProperty("gm_accessors_"))if(a.hasOwnProperty("lat")&&
a.hasOwnProperty("lng")||a.position)a=this.createMarker(a);else throw"No latitude or longitude defined";a.setMap(this.map);this.markerClusterer&&this.markerClusterer.addMarker(a);this.markers.push(a);return a};this.addMarkers=function(a){for(var d=0,b;b=a[d];d++)this.addMarker(b);return this.markers};this.hideInfoWindows=function(){for(var a=0,d;d=this.markers[a];a++)d.infoWindow&&d.infoWindow.close()};this.removeMarker=function(a){for(var d=0;d<this.markers.length;d++)if(this.markers[d]===a){this.markers[d].setMap(null);
this.markers.splice(d,1);break}return a};this.removeMarkers=function(a){for(var a=a||this.markers,d=0;d<this.markers.length;d++)this.markers[d]===a[d]&&this.markers[d].setMap(null);a=[];for(d=0;d<this.markers.length;d++)null!=this.markers[d].getMap()&&a.push(this.markers[d]);this.markers=a};this.drawOverlay=function(a){var d=new google.maps.OverlayView;d.setMap(f.map);var b=!0;null!=a.auto_show&&(b=a.auto_show);d.onAdd=function(){var b=i.createElement("div");b.style.borderStyle="none";b.style.borderWidth=
"0px";b.style.position="absolute";b.style.zIndex=100;b.innerHTML=a.content;d.el=b;var p=this.getPanes();a.layer||(a.layer="overlayLayer");p[a.layer].appendChild(b);for(var p=["contextmenu","DOMMouseScroll","dblclick","mousedown"],c=0;c<p.length;c++)(function(a,d){google.maps.event.addDomListener(a,d,function(a){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&document.all?(a.cancelBubble=!0,a.returnValue=!1):a.stopPropagation()})})(b,p[c]);google.maps.event.trigger(this,"ready")};d.draw=function(){var e=
this.getProjection().fromLatLngToDivPixel(new google.maps.LatLng(a.lat,a.lng));a.horizontalOffset=a.horizontalOffset||0;a.verticalOffset=a.verticalOffset||0;var c=d.el,f=c.children[0],g=f.clientHeight,f=f.clientWidth;switch(a.verticalAlign){case "top":c.style.top=e.y-g+a.verticalOffset+"px";break;default:case "middle":c.style.top=e.y-g/2+a.verticalOffset+"px";break;case "bottom":c.style.top=e.y+a.verticalOffset+"px"}switch(a.horizontalAlign){case "left":c.style.left=e.x-f+a.horizontalOffset+"px";
break;default:case "center":c.style.left=e.x-f/2+a.horizontalOffset+"px";break;case "right":c.style.left=e.x+a.horizontalOffset+"px"}c.style.display=b?"block":"none";b||a.show.apply(this,[c])};d.onRemove=function(){var b=d.el;a.remove?a.remove.apply(this,[b]):(d.el.parentNode.removeChild(d.el),d.el=null)};f.overlays.push(d);return d};this.removeOverlay=function(a){a.setMap(null)};this.removeOverlays=function(){for(var a=0,d;d=f.overlays[a];a++)d.setMap(null);f.overlays=[]};this.removePolylines=function(){for(var a=
0,d;d=f.polylines[a];a++)d.setMap(null);f.polylines=[]};this.drawPolyline=function(a){var d=[],b=a.path;if(b.length)if(void 0===b[0][0])d=b;else for(var e=0,c;c=b[e];e++)d.push(new google.maps.LatLng(c[0],c[1]));d={map:this.map,path:d,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight,geodesic:a.geodesic,clickable:!0,editable:!1,visible:!0};a.hasOwnProperty("clickable")&&(d.clickable=a.clickable);a.hasOwnProperty("editable")&&(d.editable=a.editable);a.hasOwnProperty("icons")&&
(d.icons=a.icons);a.hasOwnProperty("zIndex")&&(d.zIndex=a.zIndex);d=new google.maps.Polyline(d);b="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" ");for(e=0;e<b.length;e++)(function(d,b){google.maps.event.addListener(d,b,function(d){a[b]&&a[b].apply(this,[d])})})(d,b[e]);this.polylines.push(d);return d};this.drawCircle=function(a){a=extend_object({map:this.map,center:new google.maps.LatLng(a.lat,a.lng)},a);delete a.lat;delete a.lng;for(var d=new google.maps.Circle(a),
b="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),e=0;e<b.length;e++)(function(b,d){google.maps.event.addListener(b,d,function(b){a[d]&&a[d].apply(this,[b])})})(d,b[e]);this.polygons.push(d);return d};this.drawRectangle=function(a){var a=extend_object({map:this.map},a),b=new google.maps.LatLngBounds(new google.maps.LatLng(a.bounds[0][0],a.bounds[0][1]),new google.maps.LatLng(a.bounds[1][0],a.bounds[1][1]));a.bounds=b;for(var b=new google.maps.Rectangle(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),
e=0;e<c.length;e++)(function(b,d){google.maps.event.addListener(b,d,function(b){a[d]&&a[d].apply(this,[b])})})(b,c[e]);this.polygons.push(b);return b};this.drawPolygon=function(a){var b=!1;a.hasOwnProperty("useGeoJSON")&&(b=a.useGeoJSON);delete a.useGeoJSON;a=extend_object({map:this.map},a);!1==b&&(a.paths=[a.paths.slice(0)]);0<a.paths.length&&0<a.paths[0].length&&(a.paths=array_flat(array_map(a.paths,arrayToLatLng,b)));for(var b=new google.maps.Polygon(a),c="click dblclick mousedown mousemove mouseout mouseover mouseup rightclick".split(" "),
e=0;e<c.length;e++)(function(b,d){google.maps.event.addListener(b,d,function(b){a[d]&&a[d].apply(this,[b])})})(b,c[e]);this.polygons.push(b);return b};this.removePolygon=this.removeOverlay;this.removePolygons=function(){for(var a=0,b;b=f.polygons[a];a++)b.setMap(null);f.polygons=[]};this.getFromFusionTables=function(a){var b=a.events;delete a.events;var a=new google.maps.FusionTablesLayer(a),c;for(c in b)(function(a,c){google.maps.event.addListener(a,c,function(a){b[c].apply(this,[a])})})(a,c);this.layers.push(a);
return a};this.loadFromFusionTables=function(a){a=this.getFromFusionTables(a);a.setMap(this.map);return a};this.getFromKML=function(a){var b=a.url,c=a.events;delete a.url;delete a.events;var a=new google.maps.KmlLayer(b,a),e;for(e in c)(function(a,b){google.maps.event.addListener(a,b,function(a){c[b].apply(this,[a])})})(a,e);this.layers.push(a);return a};this.loadFromKML=function(a){a=this.getFromKML(a);a.setMap(this.map);return a};var r,s;this.getRoutes=function(a){switch(a.travelMode){case "bicycling":r=
google.maps.TravelMode.BICYCLING;break;case "transit":r=google.maps.TravelMode.TRANSIT;break;case "driving":r=google.maps.TravelMode.DRIVING;break;default:r=google.maps.TravelMode.WALKING}s="imperial"===a.unitSystem?google.maps.UnitSystem.IMPERIAL:google.maps.UnitSystem.METRIC;var b=extend_object({avoidHighways:!1,avoidTolls:!1,optimizeWaypoints:!1,waypoints:[]},a);b.origin=new google.maps.LatLng(a.origin[0],a.origin[1]);b.destination=new google.maps.LatLng(a.destination[0],a.destination[1]);b.travelMode=
r;b.unitSystem=s;delete b.callback;var c=this;(new google.maps.DirectionsService).route(b,function(b,d){if(d===google.maps.DirectionsStatus.OK)for(var f in b.routes)b.routes.hasOwnProperty(f)&&c.routes.push(b.routes[f]);a.callback&&a.callback(c.routes)})};this.removeRoutes=function(){this.routes=[]};this.getElevations=function(a){a=extend_object({locations:[],path:!1,samples:256},a);0<a.locations.length&&0<a.locations[0].length&&(a.locations=array_flat(array_map([a.locations],arrayToLatLng,!1)));
var b=a.callback;delete a.callback;var c=new google.maps.ElevationService;a.path?c.getElevationAlongPath({path:a.locations,samples:a.samples},function(a,c){b&&"function"===typeof b&&b(a,c)}):(delete a.path,delete a.samples,c.getElevationForLocations(a,function(a,c){b&&"function"===typeof b&&b(a,c)}))};this.cleanRoute=this.removePolylines;this.drawRoute=function(a){var b=this;this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,unitSystem:a.unitSystem,
callback:function(c){0<c.length&&(b.drawPolyline({path:c[c.length-1].overview_path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.callback&&a.callback(c[c.length-1]))}})};this.travelRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var d=b[b.length-1];if(0<d.legs.length)for(var c=
d.legs[0].steps,e=0,f;f=c[e];e++)f.step_number=e,a.step(f,d.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,e;e=b[c];c++)e.step_number=c,a.step(e)};this.drawSteppedRoute=function(a){if(a.origin&&a.destination)this.getRoutes({origin:a.origin,destination:a.destination,travelMode:a.travelMode,waypoints:a.waypoints,callback:function(b){0<b.length&&a.start&&a.start(b[b.length-1]);if(0<b.length&&a.step){var d=
b[b.length-1];if(0<d.legs.length)for(var c=d.legs[0].steps,e=0,g;g=c[e];e++)g.step_number=e,f.drawPolyline({path:g.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),a.step(g,d.legs[0].steps.length-1)}0<b.length&&a.end&&a.end(b[b.length-1])}});else if(a.route&&0<a.route.legs.length)for(var b=a.route.legs[0].steps,c=0,e;e=b[c];c++)e.step_number=c,f.drawPolyline({path:e.path,strokeColor:a.strokeColor,strokeOpacity:a.strokeOpacity,strokeWeight:a.strokeWeight}),
a.step(e)};this.checkGeofence=function(a,b,c){return c.containsLatLng(new google.maps.LatLng(a,b))};this.checkMarkerGeofence=function(a,b){if(a.fences)for(var c=0,e;e=a.fences[c];c++){var g=a.getPosition();f.checkGeofence(g.lat(),g.lng(),e)||b(a,e)}};this.addLayer=function(a,b){var b=b||{},c;switch(a){case "weather":this.singleLayers.weather=c=new google.maps.weather.WeatherLayer;break;case "clouds":this.singleLayers.clouds=c=new google.maps.weather.CloudLayer;break;case "traffic":this.singleLayers.traffic=
c=new google.maps.TrafficLayer;break;case "transit":this.singleLayers.transit=c=new google.maps.TransitLayer;break;case "bicycling":this.singleLayers.bicycling=c=new google.maps.BicyclingLayer;break;case "panoramio":this.singleLayers.panoramio=c=new google.maps.panoramio.PanoramioLayer;c.setTag(b.filter);delete b.filter;b.click&&google.maps.event.addListener(c,"click",function(a){b.click(a);delete b.click});break;case "places":this.singleLayers.places=c=new google.maps.places.PlacesService(this.map);
if(b.search||b.nearbySearch){var e={bounds:b.bounds||null,keyword:b.keyword||null,location:b.location||null,name:b.name||null,radius:b.radius||null,rankBy:b.rankBy||null,types:b.types||null};b.search&&c.search(e,b.search);b.nearbySearch&&c.nearbySearch(e,b.nearbySearch)}b.textSearch&&c.textSearch({bounds:b.bounds||null,location:b.location||null,query:b.query||null,radius:b.radius||null},b.textSearch)}if(void 0!==c)return"function"==typeof c.setOptions&&c.setOptions(b),"function"==typeof c.setMap&&
c.setMap(this.map),c};this.removeLayer=function(a){void 0!==this.singleLayers[a]&&(this.singleLayers[a].setMap(null),delete this.singleLayers[a])};this.toImage=function(a){var a=a||{},b={};b.size=a.size||[this.el.clientWidth,this.el.clientHeight];b.lat=this.getCenter().lat();b.lng=this.getCenter().lng();if(0<this.markers.length){b.markers=[];for(a=0;a<this.markers.length;a++)b.markers.push({lat:this.markers[a].getPosition().lat(),lng:this.markers[a].getPosition().lng()})}0<this.polylines.length&&
(a=this.polylines[0],b.polyline={},b.polyline.path=google.maps.geometry.encoding.encodePath(a.getPath()),b.polyline.strokeColor=a.strokeColor,b.polyline.strokeOpacity=a.strokeOpacity,b.polyline.strokeWeight=a.strokeWeight);return n.staticMapURL(b)};this.addMapType=function(a,b){if(b.hasOwnProperty("getTileUrl")&&"function"==typeof b.getTileUrl){b.tileSize=b.tileSize||new google.maps.Size(256,256);var c=new google.maps.ImageMapType(b);this.map.mapTypes.set(a,c)}else throw"'getTileUrl' function required";
};this.addOverlayMapType=function(a){if(a.hasOwnProperty("getTile")&&"function"==typeof a.getTile){var b=a.index;delete a.index;this.map.overlayMapTypes.insertAt(b,a)}else throw"'getTile' function required";};this.removeOverlayMapType=function(a){this.map.overlayMapTypes.removeAt(a)}};n.Route=function(b){this.map=b.map;this.route=b.route;this.step_count=0;this.steps=this.route.legs[0].steps;this.steps_length=this.steps.length;this.polyline=this.map.drawPolyline({path:new google.maps.MVCArray,strokeColor:b.strokeColor,
strokeOpacity:b.strokeOpacity,strokeWeight:b.strokeWeight}).getPath();this.back=function(){if(0<this.step_count){this.step_count--;var b=this.route.legs[0].steps[this.step_count].path,c;for(c in b)b.hasOwnProperty(c)&&this.polyline.pop()}};this.forward=function(){if(this.step_count<this.steps_length){var b=this.route.legs[0].steps[this.step_count].path,c;for(c in b)b.hasOwnProperty(c)&&this.polyline.push(b[c]);this.step_count++}}};n.geolocate=function(b){var c=b.always||b.complete;navigator.geolocation?
navigator.geolocation.getCurrentPosition(function(g){b.success(g);c&&c()},function(g){b.error(g);c&&c()},b.options):(b.not_supported(),c&&c())};n.geocode=function(b){this.geocoder=new google.maps.Geocoder;var c=b.callback;b.hasOwnProperty("lat")&&b.hasOwnProperty("lng")&&(b.latLng=new google.maps.LatLng(b.lat,b.lng));delete b.lat;delete b.lng;delete b.callback;this.geocoder.geocode(b,function(b,i){c(b,i)})};n.staticMapURL=function(b){function c(b,f){if("#"===b[0]&&(b=b.replace("#","0x"),f)){f=parseFloat(f);
f=Math.min(1,Math.max(f,0));if(0===f)return"0x00000000";f=(255*f).toString(16);1===f.length&&(f+=f);b=b.slice(0,8)+f}return b}var g=[],i="http://maps.googleapis.com/maps/api/staticmap";b.url&&(i=b.url,delete b.url);var i=i+"?",h=b.markers;delete b.markers;!h&&b.marker&&(h=[b.marker],delete b.marker);var l=b.polyline;delete b.polyline;if(b.center)g.push("center="+b.center),delete b.center;else if(b.address)g.push("center="+b.address),delete b.address;else if(b.lat)g.push(["center=",b.lat,",",b.lng].join("")),
delete b.lat,delete b.lng;else if(b.visible){var j=encodeURI(b.visible.join("|"));g.push("visible="+j)}(j=b.size)?(j.join&&(j=j.join("x")),delete b.size):j="630x300";g.push("size="+j);b.zoom||(b.zoom=15);j=b.hasOwnProperty("sensor")?!!b.sensor:!0;delete b.sensor;g.push("sensor="+j);for(var k in b)b.hasOwnProperty(k)&&g.push(k+"="+b[k]);if(h)for(j=0;b=h[j];j++)k=[],b.size&&"normal"!==b.size?k.push("size:"+b.size):b.icon&&k.push("icon:"+encodeURI(b.icon)),b.color&&k.push("color:"+b.color.replace("#",
"0x")),b.label&&k.push("label:"+b.label[0].toUpperCase()),b=b.address?b.address:b.lat+","+b.lng,k.length||0===j?(k.push(b),k=k.join("|"),g.push("markers="+encodeURI(k))):(k=g.pop()+encodeURI("|"+b),g.push(k));if(l){b=l;l=[];b.strokeWeight&&l.push("weight:"+parseInt(b.strokeWeight,10));b.strokeColor&&(h=c(b.strokeColor,b.strokeOpacity),l.push("color:"+h));b.fillColor&&(h=c(b.fillColor,b.fillOpacity),l.push("fillcolor:"+h));h=b.path;if(h.join)for(b=0;k=h[b];b++)l.push(k.join(","));else l.push("enc:"+
h);l=l.join("|");g.push("path="+encodeURI(l))}g=g.join("&");return i+g};google.maps.Polygon.prototype.getBounds||(google.maps.Polygon.prototype.getBounds=function(){for(var b=new google.maps.LatLngBounds,c=this.getPaths(),g,h=0;h<c.getLength();h++){g=c.getAt(h);for(var i=0;i<g.getLength();i++)b.extend(g.getAt(i))}return b});google.maps.Polygon.prototype.containsLatLng=function(b){var c=this.getBounds();if(null!==c&&!c.contains(b))return!1;for(var c=!1,g=this.getPaths().getLength(),h=0;h<g;h++)for(var i=
this.getPaths().getAt(h),l=i.getLength(),j=l-1,k=0;k<l;k++){var m=i.getAt(k),j=i.getAt(j);if(m.lng()<b.lng()&&j.lng()>=b.lng()||j.lng()<b.lng()&&m.lng()>=b.lng())m.lat()+(b.lng()-m.lng())/(j.lng()-m.lng())*(j.lat()-m.lat())<b.lat()&&(c=!c);j=k}return c};google.maps.LatLngBounds.prototype.containsLatLng=function(b){return this.contains(b)};google.maps.Marker.prototype.setFences=function(b){this.fences=b};google.maps.Marker.prototype.addFence=function(b){this.fences.push(b)};return n}(this),coordsToLatLngs=
function(c,i){var h=c[0],n=c[1];i&&(h=c[1],n=c[0]);return new google.maps.LatLng(h,n)},arrayToLatLng=function(c,i){for(var h=0;h<c.length;h++)c[h]=0<c[h].length&&"number"!=typeof c[h][0]?arrayToLatLng(c[h],i):coordsToLatLngs(c[h],i);return c},extend_object=function(c,i){if(c===i)return c;for(var h in i)c[h]=i[h];return c},replace_object=function(c,i){if(c===i)return c;for(var h in i)void 0!=c[h]&&(c[h]=i[h]);return c},array_map=function(c,i){var h=Array.prototype.slice.call(arguments,2);if(Array.prototype.map&&
c.map===Array.prototype.map)return Array.prototype.map.call(c,function(b){callback_params=h;callback_params.splice(0,0,b);return i.apply(this,callback_params)});for(var n=[],b=c.length,f=0;f<b;f++)callback_params=h,callback_params=callback_params.splice(0,0,c[f]),n.push(i.apply(this,callback_params));return n},array_flat=function(c){new_array=[];for(var i=0;i<c.length;i++)new_array=new_array.concat(c[i]);return new_array};this.GMaps&&(GMaps.prototype.addStyle=function(c){var i=new google.maps.StyledMapType(c.styles,
c.styledMapName);this.map.mapTypes.set(c.mapTypeId,i)},GMaps.prototype.setStyle=function(c){this.map.setMapTypeId(c)})};